{% extends 'main_page/base.html' %}

{% load static %}
{% load bootstrap4 %}

{% block content %}
  <form>
    <div class="form-row">
      <!-- First row of fields -->
      <div class="form-group col-md-2">
        {{ search_form.name.label }}:
        {{ search_form.name }}
      </div>
      <div class="form-group col-md-2">
        {{ search_form.cpr.label }}:
        {{ search_form.cpr }}
      </div>
      <div class="form-group col-md-2">
        {{ search_form.accession_number.label }}:
        {{ search_form.accession_number }}
      </div>
    </div>
    <!-- Second row of fields -->
    <div class="form-row">
      <div class="form-group col-md-2">
        {{ search_form.from_date.label }}:
        {{ search_form.from_date }}
      </div>
      <div class="form-group col-md-2">
        {{ search_form.to_date.label }}:
        {{ search_form.to_date }}
      </div>
    </div>

    {% buttons %}
      <input type="button" name="search" value="Søg" id="search-btn">
    {% endbuttons %}
  </form>

  <br>
  <h2>Søgeresultater:</h2>
  <div id="error-message-container">

  </div>
  <table class="table table-hover" id="result_table">
    <thead>
      <tr>
        <th onclick="sort_table(0,'result_table')">Navn</th>
        <th onclick="sort_table(1,'result_table')">Cpr-nr.</th>
        <th onclick="sort_table(2,'result_table')">undersøgelsesdato</th>
        <th onclick="sort_table(3,'result_table')">Accessionnr</th>
      </tr>
    </thead>
    <tbody id="search-table-body">
      {% for resp in responses %}
      <tr onclick="document.location='{% url "main_page:present_old_study" resp.rigs_nr %}'">
        <td>{{ resp.name }}</td>
        <td>{{ resp.cpr }}</td>
        <td>{{ resp.date }}</td>
        <td>{{ resp.rigs_nr }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}

{% block javascript %}
  <script src="{% static 'main_page/js/util/helpers.js' %}"></script>
  <script src="{% static 'main_page/js/util/csrf.js' %}"></script>
  <script src="{% static 'main_page/js/search.js' %}"></script>
  <script src="{% static 'main_page/js/sort_table.js' %}"></script>
{% endblock %}