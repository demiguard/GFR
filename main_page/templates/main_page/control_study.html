{% extends 'main_page/base.html' %}

{% load static %}
{% load bootstrap4 %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{% static 'main_page/css/control_study.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'main_page/css/util/alerter.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'main_page/css/util/csv-row.css' %}">
{% endblock head %}


{% block content %}
  <strong>Accession-nr.:</strong><p>{{ AccessionNumber }}</p>

  <form method="POST" id="Contorl-study-form">
    {% csrf_token %}
    
    <!-- Add patient info -->
    <div class="form-row">
      <div class = "form-group col-md-3">
        <div class = form-row>
            {% bootstrap_field GrandForm.cpr %}
            {% bootstrap_field GrandForm.cpr_confirm %}
        </div>
        <div class = "form-row">
          {% bootstrap_field GrandForm.name %}
          {% bootstrap_field GrandForm.name_confirm %}
          
        </div>
        <div class="form-row">
          {% bootstrap_field GrandForm.sex %}
          {% bootstrap_field GrandForm.sex_confirm %}
        </div>
        <div class="form-row">
          {% bootstrap_field GrandForm.birthdate %}
          {% bootstrap_field GrandForm.birthdate_confirm %}
        </div>
      </div>
      <div class = "form-group col-md-3">
        <div class = "form-row">
          {% bootstrap_field GrandForm.height %}
          {% bootstrap_field GrandForm.height_confirm %}
        </div>
        <div class = "form-row">
          {% bootstrap_field GrandForm.weight %}
          {% bootstrap_field GrandForm.weight_confirm %}
        </div>
      </div>
      <div class="form-group col-md-3">
        <div class="form-row">
          {% bootstrap_field GrandForm.vial_weight_before %}
          {% bootstrap_field GrandForm.vial_weight_before_confirm %}  
        </div>
        <div class="form-row">
          {% bootstrap_field GrandForm.vial_weight_after %}
          {% bootstrap_field GrandForm.vial_weight_after_confirm %}  
        </div>
        <div class="form-row">
          {% bootstrap_field GrandForm.injection_time %}
          {% bootstrap_field GrandForm.injection_time_confirm %}  
        </div>
        <div class="form-row">
          {% bootstrap_field GrandForm.injection_date %}
          {% bootstrap_field GrandForm.injection_date_confirm %}  
        </div>

      </div>  
      <div class = "form-group col-md-3">
        <div class="form-row">
          {% bootstrap_field GrandForm.thin_fac %}
          {% bootstrap_field GrandForm.thin_fac_confirm %}  
        </div>
        <div class="form-row">
          {% bootstrap_field GrandForm.study_type %} <br>
          {% bootstrap_field GrandForm.study_type_confirm %}  
        </div>
      </div>
    </div>
    
    <hr>

    <!-- Second Half -->
    <div class="row">
      <!-- Left side-->
      <div class="col-md-6">
        <!-- Display test info -->
        Standardtælletal
        <div class="form-row">
            {% bootstrap_field GrandForm.stdCnt layout='inline' form_group_class='col-md-8 form-group' %}
            {% bootstrap_field GrandForm.stdCnt_confirm form_group_class='col-md-1' %}
          
        </div>
        
        <h5>Blodprøvedata</h5>
        <div id="test-data-container">
          <!-- Place where JS inserts new test data -->
          
        <div class="form-row">
          <div class="form-group col-md-3">PrøveDato</div>
          <div class="form-group col-md-3">Prøvetidspunkt</div>
          <div class="form-group col-md-3">Tælletal</div>
        </div>     
        {% for sample in Samples %}
        <div class="form-group">
          <div class="form-row">
            {% bootstrap_field sample.sample_date layout='inline' form_group_class='col-md-3' %}                            
            {% bootstrap_field sample.sample_time layout='inline' form_group_class='col-md-3' %}                        
            {% bootstrap_field sample.sample_cnt  layout='inline' form_group_class='col-md-3' %}
            {% bootstrap_field sample.sample_confirm              form_group_class='col-md-3' %}                        
          </div>
        </div>
        {% endfor %}
        </div>
        <!-- Add test info -->
        <hr>     
        {% bootstrap_field GrandForm.bamID layout='inline' %}
        {% buttons %}
          <input type="submit" name="control" value="Godkend" id="confirm">
          <input type="submit" name="control" value="Afvis" id="deny">
        {% endbuttons %}

        <!-- Container for error/alert messages -->
        <div id="error-message-container">
  
        </div>
      <!-- Left Closing -->
      </div>

      <!-- Right side -->
      
      </div> <!-- Right closing-->
    </div>
  </form>

{% endblock %}

{% block javascript %}
<script src="{% static 'main_page/js/util/csrf.js' %}"></script>
<script src="{% static 'main_page/js/control_study.js' %}"></script>
{% endblock %}