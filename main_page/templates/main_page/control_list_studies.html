{% extends 'main_page/base.html' %}

{% load static %}
{% load gfr_tags %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{% static 'main_page/css/control_list_studies.css' %}">
{% endblock head %}


{% block content %}
<h2> Kontrol unders√∏gelse</h2> <br>
  {% if error_message %}
    <div class="row">
      <div class="col-md-4">
        <div class="alert alert-warning" role="alert">
          <strong>Advarsel: </strong><span>{{ error_message }}</span>
        </div>
      </div>
    </div>
  {% endif %}

  <table class="table table-hover" id="new_studies">
    <thead>
      <tr>
        <th onclick="sort_table(0, 'new_studies')">Navn</th>
        <th onclick="sort_table(2, 'new_studies')">Cpr nr.</th>
        <th onclick="sort_table(3, 'new_studies')">Dato</th>
        <th onclick="sort_table(4, 'new_studies')"> Procedure</th>
        <th onclick="sort_table(5, 'new_studies')">Accession nr.</th>
      </tr>
    </thead>
    <tbody>
      <!-- Make each row redirect to control_study/accessionNumber with Accession Number being the accession Number of the patient clicked -->
      {% for study in registered_studies %}
        <tr>
          <td onclick="document.location='{% url "main_page:control_study" study.AccessionNumber %}'">{{ study.PatientName }}</td>
          <td onclick="document.location='{% url "main_page:control_study" study.AccessionNumber %}'">{{ study.PatientID|format_cpr }}</td>
          <td onclick="document.location='{% url "main_page:control_study" study.AccessionNumber %}'">{{ study.StudyDateTime|date }}</td>
          <td onclick="document.location='{% url "main_page:control_study" study.AccessionNumber %}'">{{ study.StudyDescription }}</td>
          <td onclick="document.location='{% url "main_page:control_study" study.AccessionNumber %}'">{{ study.AccessionNumber }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

{% endblock %}

{% block javascript %}
  <script src="{% static 'main_page/js/util/csrf.js' %}"></script>
  <script src="{% static 'main_page/js/sort_table.js' %}"></script>
{% endblock %}